---
title: "BACSAL_new"
author: "migs"
date: "2023_2_6"
output: html_document
---
## Loading packages
```{r, echo = T, message=FALSE}
library(ggplot2)
library(magrittr)
library(tidyverse)
```


## Importing BACSAL data set
```{r, echo=T, results = 'hide'}
library(readr)
bsdata <- read_csv("complete_BACSAL_data.csv", show_col_types = F)
head(bsdata)
```

## Creating & converting variables

Root-shoot ratio (RTS) - the ratio of root dry biomass over shoot dry biomass)
Note: Mou et al. 2013 uses rts, has no units (dimensionless)
```{r, echo = T, results='hide'}
bsdata %>% 
  select(`Root Mass (g)`, `Shoot mass (g)`) %>% 
  mutate(rts = `Root Mass (g)` / `Shoot mass (g)`)
```
Specific Root Length (SRL) - root length divided by root dry mass
Note: Funk et al. 2016 uses units (cm / mg), while Kramer-Walter et al. 2016 uses units (m/g). Will use KW units.
```{r, echo = T, results='hide'}
bsdata %>% 
  select(Code, `Length(cm)`, `Root Mass (g)`) %>% 
  mutate(srl = (`Length(cm)`/100)/ `Root Mass (g)` )

```

Specific Root Area (SRA) -root area divided by dry root mass
Note: Sun et al. 2020 uses units (cm^2 / g)
```{r, echo = T, results='hide'}
bsdata %>% 
  select(Code, `SurfArea(cm2)`, `Root Mass (g)`) %>% 
  mutate(sra = `SurfArea(cm2)` / `Root Mass (g)`)
```
Relative Growth Rate, Aboveground (RGR) aka volumetric root data (delta: cm^3)
```{r}
bsdata %>% 
  select(Code, f.height, f.width1, f.width2, i.height, i.width1, i.width2) %>% 
  mutate(volrgr = (((f.height/10) * (f.width1/10) * (f.width2/10)) - ((i.height/10) * (i.width1/10) * (i.width2/10))))
```






UNFINISHED WORK BELOW
Fine:Coarse Root Ratio -need to do some digging in McCormack 2015
Note: McCormack et al. 2015 uses arbitrary 2 mm as cutoff for fine:coarse roots ratio and questions this cutoff. Blume-Werry et al. 2017 uses log transformed fine/coarse root ratio (dimensionless).
Update Note: Maybe showing root histograms? ie, length? would be logarithmic, orders of magnitude are too greatly varied between <.5 mm and >4.5 mm

Creating histogram: 
Xaxis - Root diam. classification (from <0.5 mm to >4.5 mm)
Yaxis - root length total (log transformed?)
Group by sites (biggest source of variance), take means, and add add error bars
```{r, echo = T, results='hide'}
#Reorganizing root data into one data frame
# bsdata <- structure(list(diamclass = c('0<.L.<=0.5000000', '0.5000000<.L.<=1.0000000')), .Names = c('diamclass', 'rlength'), class = 'data.frame')

bsdata %>% 
  select(Code, Origin, Treatment, 
        '0<.L.<=0.5000000', 
        '0.5000000<.L.<=1.0000000',
        `RootVolume(cm3)`,
        `Root Mass (g)`
        ) %>%
  ggplot(aes(x = log(`Root Mass (g)`), color = Origin)) +
    geom_density()

```
Root-shoot ratio, by Nitrogen
```{r, echo = T, results='show'}
bsdata %>% 
  select(Code, Origin, Treatment, Water, Nitrogen, `Root Mass (g)`, `Shoot mass (g)`) %>% 
  mutate(rts = `Root Mass (g)` / `Shoot mass (g)`) %>% 
  ggplot() +
    aes(x = Origin, y = rts, fill = Nitrogen) +
    geom_boxplot() +
    ggtitle("Root-shoot ratio, grouped by Nitrogen") +
    labs(y = "Root-to-Shoot")
```

Root-shoot ratio, by Origin
```{r, echo = T, results='show'}
bsdata %>% 
  select(Origin, `Root Mass (g)`, `Shoot mass (g)`) %>% 
  mutate(rts = `Root Mass (g)` / `Shoot mass (g)`) %>% 
  ggplot() +
    aes(x = Origin, y = rts, fill = Origin) +
    geom_boxplot() +
    ggtitle("Root-shoot ratio, grouped by Origin") +
    labs(y = "Root-to-Shoot")
```

According to Funk et al. 2017, a soft trait like SLA "can explain a large portion of the variation in RGR across a large range of herbaceous and woody plant species"







